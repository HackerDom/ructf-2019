(window.webpackJsonp=window.webpackJsonp||[]).push([[0],{13:function(e,t,n){e.exports=n.p+"static/media/logo.63618310.svg"},17:function(e,t,n){e.exports=n(37)},22:function(e,t,n){},25:function(e,t,n){},27:function(e,t,n){},37:function(e,t,n){"use strict";n.r(t);var a=n(0),o=n.n(a),c=n(9),r=n.n(c),s=(n(22),n(10)),i=n(11),l=n(15),m=n(12),u=n(16),p=n(13),d=n.n(p),h=(n(25),function(e){var t=e.field,n=e.onChangeChannel,a=e.form,c=e.type;return o.a.createElement("label",{className:"SourceInfo-label",htmlFor:t.name},t.name,": ",o.a.createElement("input",Object.assign({className:"SourceInfo"},t,{type:c,onChange:function(){n&&n.apply(void 0,arguments),a.handleChange.apply(a,arguments)}})))}),w=(n(27),n(2)),f=window.location.host,g={text:"SOS",DpM:500,freq:1e3,ch:"RUCTFE",password:""},y=g.ch,C=function(e){function t(e){var n;return Object(s.a)(this,t),(n=Object(l.a)(this,Object(m.a)(t).call(this,e))).tryConnectRadio=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:g.ch;try{var t=new WebSocket("ws://".concat(f,"/radio/").concat(e));t.binaryType="arraybuffer",t.onmessage=n.handleRadioMsg,t.onerror=function(){e==y&&setTimeout(n.tryConnectRadio,1e3)},t.onclose=function(){e==y&&setTimeout(n.tryConnectRadio,1e3)},n.radioSocket=t}catch(a){console.log("\ud83d\udca9: ".concat(a.message))}},n.handleRadioMsg=function(e){var t=e.data;try{var a=n.convert(t),o=new(window.AudioContext||window.webkitAudioContext),c=o.createBuffer(1,a.length,8e3);c.copyToChannel(a,0,0);var r=o.createBufferSource();r.buffer=c,r.connect(o.destination),r.start()}catch(s){console.log("\ud83d\udca9: ".concat(s.message))}},n.convert=function(e){for(var t=new Uint8Array(e),n=new Float32Array(t.length),a=0;a<t.length;a++)n[a]=t[a]/128-1;return n},n.changeChannel=function(e){n.radioSocket.readyState===WebSocket.OPEN&&n.radioSocket.close(),n.tryConnectRadio(e.target.value),y=e.target.value},n.tryConnectNews=function(){try{var e=new WebSocket("ws://".concat(f,"/news"));e.onmessage=n.handleNewsMsg,e.onerror=function(){return setTimeout(n.tryConnectNews,1e3)},e.onclose=function(){return setTimeout(n.tryConnectNews,1e3)},n.newsSocket=e}catch(t){console.log("\ud83d\udca9: ".concat(t.message))}},n.handleNewsMsg=function(e){var t=e.data;try{n.append(t)}catch(a){console.log("\ud83d\udca9: ".concat(a.message))}},n.append=function(e){var t=n.state.news.slice();t.push(e.toUpperCase()),t.length>5&&t.shift(),n.setState({news:t})},n.submitNewMessage=function(e){return fetch("http://".concat(f,"/db/").concat(e.ch),{method:"post",mode:"no-cors",body:JSON.stringify({dpm:e.DpM,frequency:e.freq,text:e.text.toUpperCase(),need_base32:!1,is_private:!1,password:e.password})})},n.state={news:["RUCTFE","RUCTFE","RUCTFE","RUCTFE","RUCTFE"]},n.tryConnectRadio(g.ch),n.tryConnectNews(),n}return Object(u.a)(t,e),Object(i.a)(t,[{key:"render",value:function(){var e=this,t=this.state.news;return o.a.createElement("div",{className:"App"},o.a.createElement("header",{className:"App-header"},o.a.createElement("img",{src:d.a,className:"App-logo",alt:"logo"}),o.a.createElement(w.c,{initialValues:g,onSubmit:this.submitNewMessage},function(){return o.a.createElement(w.b,{className:"App-form"},o.a.createElement(w.a,{name:"text",component:h}),o.a.createElement(w.a,{name:"DpM",component:h}),o.a.createElement(w.a,{name:"freq",component:h}),o.a.createElement(w.a,{onChangeChannel:e.changeChannel,name:"ch",component:h}),o.a.createElement(w.a,{name:"password",type:"password",component:h}),o.a.createElement("button",{className:"App-btn",type:"submit"},"send"))}),o.a.createElement("section",{className:"App-news"},t.map(function(e,t){return o.a.createElement("div",{className:"App-text",key:t},e.toUpperCase())}))))}}]),t}(a.Component);Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));r.a.render(o.a.createElement(C,null),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then(function(e){e.unregister()})}},[[17,2,1]]]);
//# sourceMappingURL=main.d6bb5c69.chunk.js.map